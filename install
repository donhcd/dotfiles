#!/bin/bash

gpr && git submodule init && git submodule update && git submodule status

dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

if [ `pwd` != "$dir" ]; then
  echo "This script must be run from its own directory."
  exit
fi

olddir=~/old_dotfiles
files=`ls`

for file in $files; do
  if [ $file != $(basename "$0") ]; then
    if [ -d ~/.$file ] || [ -f ~/.$file ]; then
      if [ ! -d $olddir ]; then
        mkdir $olddir
      fi
      echo "mv ~/.$file $olddir/$file"
      mv ~/.$file $olddir/$file
    fi
    echo "ln -s $dir/$file ~/.$file"
    ln -s $dir/$file ~/.$file
  fi
done

